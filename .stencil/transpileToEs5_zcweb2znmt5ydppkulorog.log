/*! Built with http://stenciljs.com */
import { h } from './app.core.js';
var LazyIframe = /** @class */ (function () {
    function LazyIframe() {
    }
    LazyIframe.prototype.componentDidLoad = function () {
        var _this = this;
        if ('IntersectionObserver' in window) {
            this.io = new IntersectionObserver(function (data) {
                if (data[0].isIntersecting) {
                    _this.handleIframe();
                    _this.cleanup();
                }
            });
            this.io.observe(this.el.querySelector('iframe'));
        }
        else {
            this.handleIframe();
        }
    };
    LazyIframe.prototype.componentDidUnload = function () {
        this.cleanup();
    };
    LazyIframe.prototype.handleIframe = function () {
        this.realSrc = this.src;
    };
    LazyIframe.prototype.cleanup = function () {
        // always make sure we remove the intersection
        // observer when its served its purpose so we dont
        // eat cpu cycles unnecessarily
        if (this.io) {
            this.io.disconnect();
            this.io = null;
        }
    };
    LazyIframe.prototype.render = function () {
        return (h("div", null, h("iframe", { frameBorder: "0", title: this.name, allowFullScreen: true, src: this.realSrc, frameborder: this.frameBorder, scrolling: this.scrolling, width: this.width, height: this.height })));
    };
    Object.defineProperty(LazyIframe, "is", {
        get: function () { return "lazy-iframe"; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LazyIframe, "properties", {
        get: function () {
            return {
                "el": {
                    "elementRef": true
                },
                "frameBorder": {
                    "type": String,
                    "attr": "frame-border"
                },
                "height": {
                    "type": String,
                    "attr": "height"
                },
                "name": {
                    "type": String,
                    "attr": "name"
                },
                "realSrc": {
                    "state": true
                },
                "scrolling": {
                    "type": String,
                    "attr": "scrolling"
                },
                "src": {
                    "type": String,
                    "attr": "src"
                },
                "width": {
                    "type": String,
                    "attr": "width"
                }
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LazyIframe, "style", {
        get: function () { return "/**style-placeholder:lazy-iframe:**/"; },
        enumerable: true,
        configurable: true
    });
    return LazyIframe;
}());
export { LazyIframe };
