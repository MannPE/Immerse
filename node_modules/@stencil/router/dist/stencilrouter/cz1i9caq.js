/*! Built with http://stenciljs.com */
const{h:t}=window.stencilrouter;import{a as e}from"./chunk-d6a35b20.js";import{a as o,d as n,e as i,f as s,g as r,h as l,i as a,j as c,k as u,l as h,m as d,n as p,o as f,p as g,q as m,r as y,s as w,t as b}from"./chunk-4b7cc8ca.js";var x=function(t,e,o,n){return new(o||(o=Promise))(function(i,s){function r(t){try{a(n.next(t))}catch(t){s(t)}}function l(t){try{a(n.throw(t))}catch(t){s(t)}}function a(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(r,l)}a((n=n.apply(t,e||[])).next())})};class S{constructor(){this.group=window.crypto?([1e7].toString()+-1e3.toString()+-4e3.toString()+-8e3.toString()+-1e11.toString()).replace(/[018]/g,function(t){return(t^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):(1e17*Math.random()).toString().match(/.{4}/g).join("-"),this.scrollTopOffset=null,this.activeIndex=null}componentWillLoad(){this.regenerateSubscribers(this.location)}regenerateSubscribers(t){return x(this,void 0,void 0,function*(){let e=null;var n,i,s;this.subscribers=Array.from(this.el.children).map((r,l)=>{const a=(n=t.pathname,i=r.url,s=r.exact,o(n,{path:i,exact:s,strict:!0}));return a&&null===e&&(e=l),{el:r,match:a}}),this.activeIndex!==e?(this.activeIndex=e,new Promise(t=>{const e=this.subscribers[this.activeIndex];e.el.scrollTopOffset=this.scrollTopOffset,e.el.group=this.group,e.el.groupMatch=e.match,e.el.componentUpdated=t}).then(t=>{this.queue.write(()=>{this.subscribers.forEach((t,e)=>{if(t.el.componentUpdated=null,e===this.activeIndex)return t.el.style.display=null;t.el.scrollTopOffset=this.scrollTopOffset,t.el.group=this.group,t.el.groupMatch=null,t.el.style.display="none"})}),this.routeViewsUpdated(Object.assign({scrollTopOffset:this.scrollTopOffset},t))})):this.subscribers[this.activeIndex].el.groupMatch=this.subscribers[this.activeIndex].match})}render(){return t("slot",null)}static get is(){return"stencil-route-switch"}static get properties(){return{el:{elementRef:!0},group:{type:String,attr:"group",reflectToAttr:!0},location:{type:"Any",attr:"location",watchCallbacks:["regenerateSubscribers"]},queue:{context:"queue"},routeViewsUpdated:{type:"Any",attr:"route-views-updated"},scrollTopOffset:{type:Number,attr:"scroll-top-offset"}}}}e.injectProps(S,["location","routeViewsUpdated"]);class P{constructor(){this.titleSuffix="",this.title=""}componentWillLoad(){document.title=`${this.title}${this.titleSuffix||""}`}static get is(){return"stencil-route-title"}static get properties(){return{el:{elementRef:!0},title:{type:String,attr:"title"},titleSuffix:{type:String,attr:"title-suffix"}}}}function k(t,...e){t||console.error(...e)}function O(t,...e){t||console.warn(...e)}e.injectProps(P,["titleSuffix"]);const v=()=>{let t,e=[];return{setPrompt:e=>(O(null==t,"A history supports only one prompt at a time"),t=e,()=>{t===e&&(t=null)}),confirmTransitionTo:(e,o,n,i)=>{if(null!=t){const s="function"==typeof t?t(e,o):t;"string"==typeof s?"function"==typeof n?n(s,i):(O(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==s)}else i(!0)},appendListener:t=>{let o=!0;const n=(...e)=>{o&&t(...e)};return e.push(n),()=>{o=!1,e=e.filter(t=>t!==n)}},notifyListeners:(...t)=>{e.forEach(e=>e(...t))}}},T=(t="scrollPositions")=>{let e=new Map;function o(t,o){if(e.set(t,o),n("sessionStorage")){const t=[];e.forEach((e,o)=>{t.push([o,e])}),window.sessionStorage.setItem("scrollPositions",JSON.stringify(t))}}return n("sessionStorage")&&(e=window.sessionStorage.getItem(t)?new Map(JSON.parse(window.sessionStorage.getItem(t))):e),"scrollRestoration"in history&&(history.scrollRestoration="manual"),{set:o,get:function(t){return e.get(t)},has:function(t){return e.has(t)},capture:function(t){o(t,[window.scrollX,window.scrollY])}}},L=()=>{try{return window.history.state||{}}catch(t){return{}}},R={hashbang:{encodePath:t=>"!"===t.charAt(0)?t:"!/"+w(t),decodePath:t=>"!"===t.charAt(0)?t.substr(1):t},noslash:{encodePath:w,decodePath:s},slash:{encodePath:s,decodePath:s}},U=()=>{const t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},j=t=>{const e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)};var A=function(t,e,o,n){return new(o||(o=Promise))(function(i,s){function r(t){try{a(n.next(t))}catch(t){s(t)}}function l(t){try{a(n.throw(t))}catch(t){s(t)}}function a(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(r,l)}a((n=n.apply(t,e||[])).next())})};const D={browser:(t={})=>{k(u,"Browser history needs a DOM");const e=window.history,o=f(),n=!g(),y=T(),{forceRefresh:w=!1,getUserConfirmation:b=p,keyLength:x=6}=t,S=t.basename?r(s(t.basename)):"",P=t=>{t=t||{};const{key:e,state:o}=t,{pathname:n,search:s,hash:r}=window.location;let c=n+s+r;return O(!S||l(c,S),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+c+'" to begin with "'+S+'".'),S&&(c=a(c,S)),i(c,o,e)},R=()=>Math.random().toString(36).substr(2,x),U=v(),j=t=>{y.capture(W.location.key),Object.assign(W,t),W.location.scrollPosition=y.get(W.location.key),W.length=e.length,U.notifyListeners(W.location,W.action)},A=t=>{m(t)||H(P(t.state))},D=()=>{H(P(L()))};let E=!1;const H=t=>{if(E)E=!1,j();else{const e="POP";U.confirmTransitionTo(t,e,b,o=>{o?j({action:e,location:t}):I(t)})}},I=t=>{const e=W.location;let o=C.indexOf(e.key);-1===o&&(o=0);let n=C.indexOf(t.key);-1===n&&(n=0);const i=o-n;i&&(E=!0,B(i))},M=P(L());let C=[M.key];const q=t=>S+c(t),B=t=>{e.go(t)};let V=0;const Y=t=>{1===(V+=t)?(h(window,"popstate",A),n&&h(window,"hashchange",D)):0===V&&(d(window,"popstate",A),n&&d(window,"hashchange",D))};let N=!1;const W={length:e.length,action:"POP",location:M,createHref:q,push:(t,n)=>{O(!("object"==typeof t&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");const s=i(t,n,R(),W.location);U.confirmTransitionTo(s,"PUSH",b,t=>{if(!t)return;const n=q(s),{key:i,state:r}=s;if(o)if(e.pushState({key:i,state:r},null,n),w)window.location.href=n;else{const t=C.indexOf(W.location.key),e=C.slice(0,-1===t?0:t+1);e.push(s.key),C=e,j({action:"PUSH",location:s})}else O(void 0===r,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=n})},replace:(t,n)=>{O(!("object"==typeof t&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");const s=i(t,n,R(),W.location);U.confirmTransitionTo(s,"REPLACE",b,t=>{if(!t)return;const n=q(s),{key:i,state:r}=s;if(o)if(e.replaceState({key:i,state:r},null,n),w)window.location.replace(n);else{const t=C.indexOf(W.location.key);-1!==t&&(C[t]=s.key),j({action:"REPLACE",location:s})}else O(void 0===r,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(n)})},go:B,goBack:()=>B(-1),goForward:()=>B(1),block:(t="")=>{const e=U.setPrompt(t);return N||(Y(1),N=!0),()=>(N&&(N=!1,Y(-1)),e())},listen:t=>{const e=U.appendListener(t);return Y(1),()=>{Y(-1),e()}}};return W},hash:(t={})=>{k(u,"Hash history needs a DOM");const e=window.history,o=b(),{getUserConfirmation:n=p,hashType:f="slash"}=t,g=t.basename?r(s(t.basename)):"",{encodePath:m,decodePath:w}=R[f],x=()=>{let t=w(U());return O(!g||l(t,g),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+g+'".'),g&&(t=a(t,g)),i(t)},S=v(),P=t=>{Object.assign(N,t),N.length=e.length,S.notifyListeners(N.location,N.action)};let T=!1,L=null;const A=()=>{const t=U(),e=m(t);if(t!==e)j(e);else{const t=x(),e=N.location;if(!T&&y(e,t))return;if(L===c(t))return;L=null,D(t)}},D=t=>{if(T)T=!1,P();else{const e="POP";S.confirmTransitionTo(t,e,n,o=>{o?P({action:e,location:t}):E(t)})}},E=t=>{const e=N.location;let o=C.lastIndexOf(c(e));-1===o&&(o=0);let n=C.lastIndexOf(c(t));-1===n&&(n=0);const i=o-n;i&&(T=!0,q(i))},H=U(),I=m(H);H!==I&&j(I);const M=x();let C=[c(M)];const q=t=>{O(o,"Hash history go(n) causes a full page reload in this browser"),e.go(t)};let B=0;const V=t=>{1===(B+=t)?h(window,"hashchange",A):0===B&&d(window,"hashchange",A)};let Y=!1;const N={length:e.length,action:"POP",location:M,createHref:t=>"#"+m(g+c(t)),push:(t,e)=>{O(void 0===e,"Hash history cannot push state; it is ignored");const o=i(t,void 0,void 0,N.location);S.confirmTransitionTo(o,"PUSH",n,t=>{if(!t)return;const e=c(o),n=m(g+e);if(U()!==n){L=e,(t=>window.location.hash=t)(n);const t=C.lastIndexOf(c(N.location)),i=C.slice(0,-1===t?0:t+1);i.push(e),C=i,P({action:"PUSH",location:o})}else O(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),P()})},replace:(t,e)=>{O(void 0===e,"Hash history cannot replace state; it is ignored");const o=i(t,void 0,void 0,N.location);S.confirmTransitionTo(o,"REPLACE",n,t=>{if(!t)return;const e=c(o),n=m(g+e);U()!==n&&(L=e,j(n));const i=C.indexOf(c(N.location));-1!==i&&(C[i]=e),P({action:"REPLACE",location:o})})},go:q,goBack:()=>q(-1),goForward:()=>q(1),block:(t="")=>{const e=S.setPrompt(t);return Y||(V(1),Y=!0),()=>(Y&&(Y=!1,V(-1)),e())},listen:t=>{const e=S.appendListener(t);return V(1),()=>{V(-1),e()}}};return N}};class E{constructor(){this.root="/",this.historyType="browser",this.titleSuffix="",this.scrollTopOffset=null,this.routeViewsUpdated=((t={})=>{this.scrollTo(t.scrollTopOffset||this.scrollTopOffset)})}componentWillLoad(){this.history=D[this.historyType](),this.history.listen(t=>A(this,void 0,void 0,function*(){t=this.getLocation(t),this.location=t})),this.location=this.getLocation(this.history.location)}scrollTo(t){if(null!=t&&!this.isServer&&this.history)return"POP"===this.history.action&&null!=this.history.location.scrollPosition?this.queue.write(()=>{window.scrollTo(this.history.location.scrollPosition[0],this.history.location.scrollPosition[1])}):this.queue.write(()=>{window.scrollTo(0,t)})}getLocation(t){const e=0==t.pathname.indexOf(this.root)?"/"+t.pathname.slice(this.root.length):t.pathname;return Object.assign({},t,{pathname:e})}render(){const o={historyType:this.historyType,location:this.location,titleSuffix:this.titleSuffix,root:this.root,history:this.history,routeViewsUpdated:this.routeViewsUpdated};return t(e.Provider,{state:o},t("slot",null))}static get is(){return"stencil-router"}static get properties(){return{history:{state:!0},historyType:{type:String,attr:"history-type"},isServer:{context:"isServer"},location:{state:!0},queue:{context:"queue"},root:{type:String,attr:"root"},scrollTopOffset:{type:Number,attr:"scroll-top-offset"},titleSuffix:{type:String,attr:"title-suffix"}}}}class H{constructor(){this.history=null,this.root=null}componentWillLoad(){return this.history.replace(this.getUrl(this.url))}getUrl(t){return"/"==t.charAt(0)&&"/"==this.root.charAt(this.root.length-1)?this.root.slice(0,this.root.length-1)+t:this.root+t}static get is(){return"stencil-router-redirect"}static get properties(){return{el:{elementRef:!0},history:{type:"Any",attr:"history"},root:{type:String,attr:"root"},url:{type:String,attr:"url"}}}}e.injectProps(H,["history","root"]);const I=e=>{var{component:o}=e,n=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&(o[n[i]]=t[n[i]])}return o}(e,["component"]);return t("stencil-route",Object.assign({},n,{routeRender:e=>window.userAuthenticated?t(o,Object.assign({},e,e.componentProps)):t("stencil-router-redirect",{url:"/"})}))};class M{render(){return t("stencil-router",{"title-suffix":" - Stencil Router Demos"},t("ul",null,t("li",null,t("stencil-route-link",{url:"/",exact:!0},"Exact Base Link")),t("li",null,t("stencil-route-link",{url:"/"},"Base Link")),t("li",null,t("stencil-route-link",{url:"/demo",urlMatch:["/demo","/demox"],exact:!0},"Demo Link")),t("li",null,t("stencil-route-link",{url:"/demo2"},"Demo2 Link")),t("li",null,t("stencil-route-link",{url:"/demo3"},"Demo3 Link")),t("li",null,t("stencil-route-link",{url:"/demo3/page1"},"Demo3 Page1 Link")),t("li",null,t("stencil-route-link",{url:"/demo3/page2"},"Demo3 Page2 Link")),t("li",null,t("stencil-route-link",{url:"/demo4"},"Demo4 Link")),t("li",null,t("stencil-route-link",{anchorClass:"what",url:"/demo6/"},"Demo6 Link")),t("li",null,t("stencil-route-link",{anchorTabIndex:"1",url:"/demo7/"},"Demo7 Link")),t("stencil-route-link",{custom:"li",url:"/demo8/"},"Demo8 Link")),t("stencil-route-switch",null,t("stencil-route",{url:"/",exact:!0,routeRender:e=>t("span",null,"rendering /")}),t("stencil-route",{url:["/demo","/demox"],routeRender:e=>t("div",null,t("stencil-route-title",{title:"DEMO"}),t("span",null,"rendering /demo"),t("li",null,t("stencil-route-link",{url:"/demo3"},"Demo3 Link")))}),t("stencil-route",{url:"/demo2",routeRender:e=>[t("span",null,"rendering /demo2"),t("stencil-router-redirect",{url:"/demo3"})]}),t("stencil-route",{url:"/demo3",component:"test-demo-three"}),t("stencil-route",{url:"/demo4",component:"test-demo-four"}),t("stencil-route",{url:"/demo5",component:"async-content",componentProps:{location:"/"}}),t("stencil-route",{url:"/demo6",component:"test-demo-six"}),t(I,{url:"/demo7",component:"test-demo-six",componentProps:{testing:!0}}),t("stencil-route",{url:"/demo8",routeRender:e=>[t("stencil-route-title",{title:"Demo 8"}),t("span",null,"rendering /demo 8")]}),t("stencil-route",{routeRender:()=>t("span",null,"The route is not found")})))}static get is(){return"test-app"}}export{S as StencilRouteSwitch,P as StencilRouteTitle,E as StencilRouter,H as StencilRouterRedirect,M as TestApp};